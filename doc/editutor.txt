*editutor.txt*  ai-editutor - Learn while you build

==============================================================================
CONTENTS                                                    *editutor-contents*

    1. Introduction .......................... |editutor-introduction|
    2. Requirements .......................... |editutor-requirements|
    3. Installation .......................... |editutor-installation|
    4. Configuration ......................... |editutor-configuration|
    5. Usage ................................. |editutor-usage|
    6. Response Format ....................... |editutor-response|
    7. Float Window .......................... |editutor-float-window|
    8. Visual Selection ...................... |editutor-visual|
    9. Skip Answered ......................... |editutor-skip-answered|
   10. Context Extraction .................... |editutor-context|
   11. Knowledge Tracking .................... |editutor-knowledge|
   12. Commands .............................. |editutor-commands|
   13. Keymaps ............................... |editutor-keymaps|
   14. API ................................... |editutor-api|

==============================================================================
1. INTRODUCTION                                         *editutor-introduction*

Build projects. Ask questions. Level up.

ai-editutor is a Neovim plugin for developers who learn by building.

You're building something real. You have questions. Instead of breaking
your flow to search Stack Overflow or switch to ChatGPT, you ask right
here in your code: >
    // What is closure?
<
Press <leader>ma. Get an answer. Keep building. Keep learning.

This is not about coding faster. It's about understanding what you write.
Every question is a chance to level up.

v2.0 - No Prefix Needed:
  Just write a comment naturally. The AI auto-detects your intent.

Examples: >
    // What is closure?                -> AI explains
    // function to validate email      -> AI generates code
    // Review this for security        -> AI reviews
    // Why does this return nil?       -> AI debugs
<

==============================================================================
2. REQUIREMENTS                                         *editutor-requirements*

Required:
  - Neovim 0.9.0+
  - plenary.nvim (for HTTP requests)
  - An API key for Claude/OpenAI (or local Ollama)

Recommended:
  - nvim-treesitter (for better code parsing)
  - LSP server for your language (for enhanced context)

==============================================================================
3. INSTALLATION                                         *editutor-installation*

Using lazy.nvim: >lua
    {
      "iknizzz1807/ai-editutor",
      dependencies = {
        "nvim-lua/plenary.nvim",
        "nvim-treesitter/nvim-treesitter",  -- Recommended
      },
      config = function()
        require("editutor").setup({
          provider = "claude",
        })
      end,
    }
<

==============================================================================
4. CONFIGURATION                                       *editutor-configuration*

Default configuration: >lua
    require("editutor").setup({
      -- LLM Provider
      provider = "claude",  -- claude, openai, deepseek, gemini, groq, ollama
      model = "claude-sonnet-4-20250514",

      -- Behavior
      language = "English",  -- or "Vietnamese"

      -- Context extraction
      context = {
        token_budget = 20000,  -- Max tokens for context
      },

      -- Keymaps
      keymaps = {
        ask = "<leader>ma",      -- Ask about comment near cursor
        toggle = "<leader>mt",   -- Toggle float window
      },
    })
<

==============================================================================
5. USAGE                                                       *editutor-usage*

Basic Usage:

1. Write a comment (no special prefix needed): >
    // What does this function do?
    // function to validate email
    // Review this for security issues
<

2. Press <leader>ma (or your configured keymap)

3. The response is inserted below as a comment with [AI] marker: >
    /* [AI]
    Your answer here...
    */
<

4. Press <leader>mt to view/edit response in float window

==============================================================================
6. RESPONSE FORMAT                                        *editutor-response*

All AI responses use the `[AI]` marker format: >
    // What is closure?
    /* [AI]
    A closure is a function that "remembers" variables from its outer scope
    even after that scope has finished executing.

    Example:
    function counter() {
      let count = 0;
      return () => ++count;
    }

    Best practice: Use for data privacy, callbacks, factory functions.
    Watch out: Can cause memory leaks if holding large objects.
    */
<

The `[AI]` marker makes it easy to:
  - Identify AI-generated content
  - Search for AI responses in your codebase
  - Skip already-answered questions

==============================================================================
7. FLOAT WINDOW                                         *editutor-float-window*

Press <leader>mt to toggle the AI response in a floating window.

Features:
  - Markdown syntax highlighting
  - Editable buffer - make changes directly
  - Changes sync back to source file on save

Keymaps in float window:
  q          Close without saving
  <Esc>      Close without saving
  <C-s>      Save changes and close
  :w         Save changes and close
  :wq        Save changes and close
  :q         Close without saving

==============================================================================
8. VISUAL SELECTION                                          *editutor-visual*

Select code and ask focused questions about it.

Usage:
  1. Enter visual mode (v or V)
  2. Select the code block you want to focus on
  3. Write a comment about it (or have one in selection)
  4. Press <leader>ma

The selected code is sent with priority focus in the prompt.

==============================================================================
9. SKIP ANSWERED                                       *editutor-skip-answered*

Comments that already have `[AI]` responses below are automatically skipped.

Example: >
    function test() {
      // What is closure?       <- SKIPPED (has [AI] response below)
      /* [AI]
      A closure is...
      */

      // How does async work?   <- FOUND (unanswered)
      return 42;
    }
<

==============================================================================
10. CONTEXT EXTRACTION                                      *editutor-context*

ai-editutor automatically gathers context from your project:

Small projects (<20K tokens):
  - Sends entire codebase

Large projects (>20K tokens):
  - Current file (full)
  - Import graph (files you import + files that import you)
  - LSP definitions (deduplicated)
  - Project structure tree

==============================================================================
11. KNOWLEDGE TRACKING                                     *editutor-knowledge*

All Q&A pairs are automatically saved for future reference.

Storage Structure: >
    ~/.local/share/nvim/editutor/knowledge/
    ├── 2026-01-15.json
    ├── 2026-01-16.json
    ├── 2026-01-17.json
    └── ...
<
Each day gets its own file. Easy to manage, review, or delete.

Commands:
  :EduTutorHistory        Show recent Q&A (last 7 days)
  :EduTutorBrowse         List available dates
  :EduTutorBrowse [date]  Show entries for specific date
  :EduTutorExport [path]  Export to markdown

==============================================================================
12. COMMANDS                                                *editutor-commands*

Core Commands:
  :EduTutorAsk            Ask about comment near cursor
  :EduTutorToggle         Toggle AI response in float window

Knowledge Commands:
  :EduTutorHistory        Show recent Q&A history
  :EduTutorBrowse [date]  Browse by date (tab-complete dates)
  :EduTutorExport [path]  Export to markdown

Language Commands:
  :EduTutorLang           Show/set language
  :EduTutorLang English   English responses
  :EduTutorLang Vietnamese Vietnamese responses

Other Commands:
  :EduTutorClearCache     Clear context cache
  :EduTutorLog            Open debug log
  :checkhealth editutor   Check plugin health

==============================================================================
13. KEYMAPS                                                  *editutor-keymaps*

Default keymaps (configurable):

  Normal mode:
    <leader>ma    Ask about comment near cursor
    <leader>mt    Toggle AI response in float window

  Visual mode:
    <leader>ma    Ask about selected code

==============================================================================
14. API                                                          *editutor-api*

Main API: >lua
    local editutor = require("editutor")

    editutor.setup(opts)
    editutor.ask()              -- Normal mode ask
    editutor.ask_visual()       -- Visual mode ask
    editutor.toggle_float()     -- Toggle float window
    editutor.version()          -- Returns version string
<

Parser API: >lua
    local parser = require("editutor.parser")

    parser.find_question_near_cursor(bufnr)  -- Find comment near cursor
    parser.is_ai_response_start(line, style) -- Check if line starts [AI] response
    parser.find_ai_response_block(bufnr, line) -- Find AI response block
    parser.get_visual_selection()            -- Get visual selection
<

Comment Writer API: >lua
    local comment_writer = require("editutor.comment_writer")

    comment_writer.AI_MARKER                           -- "[AI]" constant
    comment_writer.format_response(response, bufnr)    -- Format as comment
    comment_writer.start_streaming(line, bufnr)        -- Start streaming
    comment_writer.update_streaming(state, content)    -- Update streaming
    comment_writer.finish_streaming(state)             -- Finish streaming
    comment_writer.find_ai_response_block(bufnr, line) -- Find [AI] block
<

Float Window API: >lua
    local float_window = require("editutor.float_window")

    float_window.toggle(bufnr)    -- Toggle float window
    float_window.open(bufnr)      -- Open float window
    float_window.close(bufnr, save) -- Close, optionally save
    float_window.is_open(bufnr)   -- Check if open
<

Provider API: >lua
    local provider = require("editutor.provider")

    provider.query_async(system, user, callback)
    provider.query_stream(system, user, on_chunk, on_done, opts)
    provider.list_providers()
<

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
