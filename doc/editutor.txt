*editutor.txt*  ai-editutor - Learn to code better with AI guidance

==============================================================================
CONTENTS                                                    *editutor-contents*

    1. Introduction .......................... |editutor-introduction|
    2. Requirements .......................... |editutor-requirements|
    3. Installation .......................... |editutor-installation|
    4. Configuration ......................... |editutor-configuration|
    5. Usage ................................. |editutor-usage|
    6. Modes ................................. |editutor-modes|
    7. Incremental Hints ..................... |editutor-hints|
    8. Knowledge Tracking .................... |editutor-knowledge|
    9. LSP Context ........................... |editutor-lsp-context|
   10. Conversation Memory ................... |editutor-conversation|
   11. Commands .............................. |editutor-commands|
   12. Keymaps ............................... |editutor-keymaps|
   13. API ................................... |editutor-api|
   14. Health Check .......................... |editutor-health|

==============================================================================
1. INTRODUCTION                                         *editutor-introduction*

ai-editutor is a Neovim plugin that acts as your personal coding mentor. Unlike
code generation tools like GitHub Copilot, ai-editutor explains concepts and
guides your learning instead of writing code for you.

Philosophy: "Teach a person to fish, don't fish for them."

v0.8.0 - Inline Comments UI:
  Responses are now inserted directly as comments in your code file, right
  below your question. No floating windows - everything stays in your code.

Features:
  - Inline comment responses (v0.8.0)
  - 5 learning modes (Question, Socratic, Review, Debug, Explain)
  - Incremental hints (4 levels from subtle to complete)
  - Knowledge tracking (save and search Q&A history)
  - LSP-based context (auto-fetches related definitions from project)
  - Conversation memory (follow-up questions keep context)
  - Project documentation context (README, package.json, etc.)
  - Multiple LLM providers (Claude, OpenAI, Ollama)
  - Multi-language support (English, Vietnamese)

==============================================================================
2. REQUIREMENTS                                         *editutor-requirements*

Required:
  - Neovim 0.9.0+
  - plenary.nvim (for HTTP requests)
  - An API key for Claude/OpenAI (or local Ollama)

Recommended:
  - LSP server for your language (for enhanced context extraction)
  - nvim-treesitter (for better context extraction when LSP unavailable)

Optional:
  - sqlite.lua (for enhanced knowledge storage)

==============================================================================
3. INSTALLATION                                         *editutor-installation*

Using lazy.nvim: >lua
    {
      "your-username/editutor",
      dependencies = {
        "nvim-lua/plenary.nvim",
        "nvim-treesitter/nvim-treesitter",
      },
      config = function()
        require("editutor").setup({
          provider = "claude",
          api_key = os.getenv("ANTHROPIC_API_KEY"),
        })
      end,
    }
<

==============================================================================
4. CONFIGURATION                                       *editutor-configuration*

Default configuration: >lua
    require("editutor").setup({
      -- LLM Provider: "claude" | "openai" | "ollama"
      provider = "claude",
      model = "claude-sonnet-4-20250514",

      -- Behavior
      default_mode = "question",
      context_lines = 50,
      include_imports = true,
      language = "English",  -- or "Vietnamese"

      -- LSP Context extraction
      context = {
        lines_around_cursor = 100,    -- Lines around cursor
        external_context_lines = 30,  -- Lines around each external def
        max_external_symbols = 20,    -- Max symbols to resolve
      },

      -- Keymaps
      keymaps = {
        ask = "<leader>ma",
      },
    })
<

Provider-specific models:
  Claude: "claude-sonnet-4-20250514", "claude-opus-4-20250514"
  OpenAI: "gpt-4o", "gpt-4o-mini"
  Ollama: "llama3.2", "codellama", etc.

==============================================================================
5. USAGE                                                       *editutor-usage*

1. Write a comment with a mentor prefix: >
    // Q: What is the time complexity of this algorithm?
<

2. Press <leader>ma (or your configured keymap)

3. The explanation is inserted as a comment below your question: >
    // Q: What is the time complexity of this algorithm?
    /*
    A: This algorithm has O(n) time complexity because...
    */
<

4. The response stays in your code file as documentation

Comment Style:
  ai-editutor automatically detects the appropriate comment style:
  - JS/TS/Go/Rust/C: /* block comment */
  - Python: """ docstring """
  - Lua/SQL: --[[ block ]]
  - HTML/XML: <!-- comment -->
  - Shell/YAML: # line comment

==============================================================================
6. MODES                                                       *editutor-modes*

ai-editutor supports 5 interaction modes:

*Q:* Question Mode                                          *editutor-question*
    Direct answers with explanations
    Example: // Q: What does this regex do?

*S:* Socratic Mode                                          *editutor-socratic*
    Guided discovery through questions
    Example: // S: Why might a mutex be better here?

*R:* Review Mode                                              *editutor-review*
    Code review with security, performance, best practices
    Example: // R: Review this function

*D:* Debug Mode                                                *editutor-debug*
    Guided debugging process
    Example: // D: This returns nil sometimes, why?

*E:* Explain Mode                                            *editutor-explain*
    Deep concept explanations
    Example: // E: Explain closures in JavaScript

==============================================================================
7. INCREMENTAL HINTS                                          *editutor-hints*

The hints system provides progressive assistance in 4 levels:

  Level 1: Subtle hint - Points in the right direction
  Level 2: Clearer hint - Narrows down the problem
  Level 3: Strong hint - Almost reveals the answer
  Level 4: Full solution - Complete explanation

Usage:
  1. Write your question comment
  2. Run :EduTutorHint
  3. Run :EduTutorHint again to get next level hint

Each hint level replaces the previous response in your code. This approach
encourages learning by giving progressively more help rather than immediate
complete answers.

==============================================================================
8. KNOWLEDGE TRACKING                                      *editutor-knowledge*

ai-editutor automatically saves all Q&A pairs for future reference.

Commands:
  :EduTutorHistory     Show recent Q&A history
  :EduTutorSearch      Search knowledge base
  :EduTutorExport      Export to markdown file
  :EduTutorStats       Show statistics

Knowledge is stored in:
  - SQLite (if sqlite.lua is installed)
  - JSON file fallback (~/.local/share/nvim/editutor_knowledge.json)

Export example: >
    :EduTutorExport ~/my_learnings.md
<

==============================================================================
9. LSP CONTEXT                                           *editutor-lsp-context*

ai-editutor automatically gathers context from your project using LSP
(Language Server Protocol). When you ask a question, it:

  1. Extracts code around your cursor (configurable lines)
  2. Finds all identifiers/symbols in that code using Tree-sitter
  3. Uses LSP go-to-definition to find where they're defined
  4. Includes relevant definitions from OTHER project files
  5. Filters out library code (node_modules, site-packages, etc.)

This gives the LLM a complete picture of how your code connects together,
without requiring any external indexing or setup.

How it works:                                            *editutor-lsp-how*
  - Only fetches definitions from PROJECT files (not libraries)
  - Limits to 100 lines around cursor for performance
  - Includes up to 20 external symbol definitions
  - Falls back to Tree-sitter context when LSP unavailable

Excluded paths (library detection):
  - node_modules, .venv, venv, site-packages
  - vendor, .cargo/registry, target/debug, target/release
  - /usr/, /opt/, .local/lib/, .luarocks/

Configuration: >lua
    require("editutor").setup({
      context = {
        lines_around_cursor = 100,    -- Lines around cursor
        external_context_lines = 30,  -- Lines around external definitions
        max_external_symbols = 20,    -- Max symbols to resolve
      },
    })
<

==============================================================================
10. CONVERSATION MEMORY                                  *editutor-conversation*

ai-editutor remembers your conversation context for follow-up questions.

How It Works:                                        *editutor-conversation-how*
  - Each question continues from the previous Q&A in the same session
  - Sessions are tied to file + line proximity
  - Auto-clears after 30 minutes of inactivity

Session Continuation Rules:
  - Same file + within 50 lines of last question = continues
  - Different file = starts new session
  - More than 50 lines away = starts new session
  - More than 30 min since last question = starts new session

Example: >
    // Q: What does this function do?
    // [Response inserted below]

    // Q: Can you explain the error handling?
    // [AI remembers previous discussion]
<

Commands:
  :EduTutorConversation       Show current session info
  :EduTutorClearConversation  Clear session to start fresh

Project Documentation:                               *editutor-project-context*
  ai-editutor automatically reads project documentation for better context:

  - README.md, README - Project overview
  - package.json, pyproject.toml, Cargo.toml - Dependencies
  - go.mod, pom.xml, build.gradle - Build config
  - ARCHITECTURE.md, CONTRIBUTING.md - Design docs

==============================================================================
11. COMMANDS                                                *editutor-commands*

Core Commands:
  :EduTutorAsk            Ask about current mentor comment
  :EduTutorHint           Ask with incremental hints
  :EduTutorModes          Show available modes

Mode Commands:
  :EduTutorQuestion       Force Question mode
  :EduTutorSocratic       Force Socratic mode
  :EduTutorReview         Force Review mode
  :EduTutorDebug          Force Debug mode
  :EduTutorExplain        Force Explain mode

Knowledge Commands:
  :EduTutorHistory        Show Q&A history
  :EduTutorSearch [query] Search knowledge base
  :EduTutorExport [path]  Export to markdown
  :EduTutorStats          Show statistics

Language Commands:
  :EduTutorLang           Show current language and options
  :EduTutorLang English   Switch to English responses
  :EduTutorLang Vietnamese Switch to Vietnamese responses
  :EduTutorLang vi        Short form for Vietnamese
  :EduTutorLang en        Short form for English

Conversation Commands:
  :EduTutorConversation       Show current conversation session info
  :EduTutorClearConversation  Clear current conversation

==============================================================================
12. KEYMAPS                                                  *editutor-keymaps*

Default keymaps (configurable):

Normal mode:
    <leader>ma    Ask mentor about current comment

The response is inserted as an inline comment below your question.

==============================================================================
13. API                                                          *editutor-api*

Lua API: >lua
    local editutor = require("editutor")

    -- Setup
    editutor.setup(opts)

    -- Ask about current comment (inserts response as inline comment)
    editutor.ask()

    -- Ask with incremental hints
    editutor.ask_with_hints()

    -- Ask with specific mode
    editutor.ask_mode("question")
    editutor.ask_mode("socratic")
    editutor.ask_mode("review")
    editutor.ask_mode("debug")
    editutor.ask_mode("explain")

    -- Knowledge functions
    editutor.show_history()
    editutor.search_knowledge(query)
    editutor.export_knowledge(path)
    editutor.show_stats()

    -- Conversation functions
    editutor.show_conversation()
    editutor.clear_conversation()

    -- Utilities
    editutor.show_modes()
    editutor.version()
<

Comment Writer API: >lua
    local comment_writer = require("editutor.comment_writer")

    -- Get comment style for current filetype
    comment_writer.get_style(bufnr)

    -- Format response as comments
    comment_writer.format_response(response, bufnr, reference_line)

    -- Insert response as comment after a line
    comment_writer.insert_response(response, after_line, bufnr)

    -- Insert or replace existing response
    comment_writer.insert_or_replace(response, question_line, bufnr)

    -- Remove existing response after question
    comment_writer.remove_existing_response(question_line, bufnr)
<

Knowledge API: >lua
    local knowledge = require("editutor.knowledge")

    knowledge.save({ mode, question, answer, language, filepath, tags })
    knowledge.get_recent(limit)
    knowledge.search(query, limit)
    knowledge.get_stats()
    knowledge.export_markdown(filepath)
<

Conversation API: >lua
    local conversation = require("editutor.conversation")

    conversation.start_session(opts)
    conversation.continue_or_start(filepath, line, mode)
    conversation.add_message(role, content)
    conversation.get_history()
    conversation.get_history_as_context()
    conversation.has_active_session()
    conversation.get_session_info()
    conversation.clear_session()
<

Project Context API: >lua
    local project_context = require("editutor.project_context")

    project_context.get_project_root()
    project_context.get_project_docs()
    project_context.get_project_summary()
    project_context.get_references(bufnr, line, col, callback)
    project_context.get_workspace_symbols(query, callback)
    project_context.get_document_symbols(bufnr, callback)
    project_context.clear_cache()
<

==============================================================================
14. HEALTH CHECK                                              *editutor-health*

Run health check to verify setup:
>
    :checkhealth editutor
<

This checks:
  - Neovim version
  - Required dependencies (plenary.nvim)
  - Optional dependencies (sqlite.lua)
  - Tree-sitter availability
  - LSP availability for current buffer
  - Provider configuration
  - API key setup
  - Knowledge database status

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
