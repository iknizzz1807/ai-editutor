*editutor.txt*  ai-editutor - Learn while you build

==============================================================================
CONTENTS                                                    *editutor-contents*

    1. Introduction .......................... |editutor-introduction|
    2. Requirements .......................... |editutor-requirements|
    3. Installation .......................... |editutor-installation|
    4. Configuration ......................... |editutor-configuration|
    5. Usage ................................. |editutor-usage|
    6. Q: Mode ............................... |editutor-q-mode|
    7. C: Mode ............................... |editutor-c-mode|
    8. Visual Selection ...................... |editutor-visual|
    9. Skip Answered ......................... |editutor-skip-answered|
   10. Context Extraction .................... |editutor-context|
   11. Knowledge Tracking .................... |editutor-knowledge|
   12. Commands .............................. |editutor-commands|
   13. Keymaps ............................... |editutor-keymaps|
   14. API ................................... |editutor-api|

==============================================================================
1. INTRODUCTION                                         *editutor-introduction*

Build projects. Ask questions. Level up.

ai-editutor is a Neovim plugin for developers who learn by building.

You're building something real. You have questions. Instead of breaking
your flow to search Stack Overflow or switch to ChatGPT, you ask right
here in your code: >
    // Q: What is closure?
<
Press <leader>ma. Get an answer. Keep building. Keep learning.

This is not about coding faster. It's about understanding what you write.
Every question is a chance to level up.

Two Modes:
  Q: (Question) - Deep explanations that stick
  C: (Code)     - Working code with notes on what matters

Examples: >
    // Q: What is closure?           -> explains the concept deeply
    // Q: Why does this return nil?  -> guides your debugging
    // C: validate email function    -> generates actual code + notes
<

==============================================================================
2. REQUIREMENTS                                         *editutor-requirements*

Required:
  - Neovim 0.9.0+
  - plenary.nvim (for HTTP requests)
  - An API key for Claude/OpenAI (or local Ollama)

Recommended:
  - nvim-treesitter (for better code parsing)
  - LSP server for your language (for enhanced context)

==============================================================================
3. INSTALLATION                                         *editutor-installation*

Using lazy.nvim: >lua
    {
      "your-username/ai-editutor",
      dependencies = {
        "nvim-lua/plenary.nvim",
        "nvim-treesitter/nvim-treesitter",  -- Recommended
      },
      config = function()
        require("editutor").setup({
          provider = "claude",
        })
      end,
    }
<

==============================================================================
4. CONFIGURATION                                       *editutor-configuration*

Default configuration: >lua
    require("editutor").setup({
      -- LLM Provider
      provider = "claude",  -- claude, openai, deepseek, groq, ollama
      model = "claude-sonnet-4-20250514",

      -- Behavior
      language = "English",  -- or "Vietnamese"

      -- Context extraction
      context = {
        token_budget = 20000,  -- Max tokens for context
      },

      -- Keymaps
      keymaps = {
        ask = "<leader>ma",
      },
    })
<

==============================================================================
5. USAGE                                                       *editutor-usage*

Basic Usage:

1. Write a comment with Q: or C: prefix: >
    // Q: What does this function do?
    // C: helper to format date
<

2. Press <leader>ma (or your configured keymap)

3. The response is inserted below:
   - Q: mode -> response as comment block
   - C: mode -> actual code + notes

==============================================================================
6. Q: MODE                                                   *editutor-q-mode*

Use Q: prefix to ask questions. The response is inserted as a comment.

Examples: >
    // Q: What is closure?
    // Q: Why does this return undefined?
    // Q: Review this function for security issues
    // Q: Explain async/await
<

Response format: >
    // Q: What is closure?
    /*
    A: A closure is a function that "remembers" variables from its
    outer scope even after that scope has finished executing.

    Why it matters: Enables data privacy and callbacks.
    Watch out: Accidental closures in loops.
    */
<

==============================================================================
7. C: MODE                                                   *editutor-c-mode*

Use C: prefix to generate code. The response is inserted as actual code.

Examples: >
    // C: function to validate email
    // C: async fetch with retry logic
    // C: helper to deep clone object
<

Response format: >
    // C: validate email
    function validateEmail(email) {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }
    /*
    Notes:
    - Simple regex for common formats
    - For strict validation, consider validator.js
    */
<

==============================================================================
8. VISUAL SELECTION                                          *editutor-visual*

Select code and ask focused questions about it.

Usage:
  1. Enter visual mode (v or V)
  2. Select the code block you want to focus on
  3. Include a // Q: or // C: comment within the selection
  4. Press <leader>ma

The selected code is sent with priority focus in the prompt.

==============================================================================
9. SKIP ANSWERED                                       *editutor-skip-answered*

Questions that already have responses below are automatically skipped.

Example: >
    function test() {
      // Q: What is closure?       <- SKIPPED (has answer below)
      /*
      A: A closure is...
      */

      // Q: How does async work?   <- FOUND (unanswered)
      return 42;
    }
<

==============================================================================
10. CONTEXT EXTRACTION                                      *editutor-context*

ai-editutor automatically gathers context from your project:

Small projects (<20K tokens):
  - Sends entire codebase

Large projects (>20K tokens):
  - Current file (full)
  - Import graph (files you import + files that import you)
  - LSP definitions (deduplicated)
  - Project structure tree

==============================================================================
11. KNOWLEDGE TRACKING                                     *editutor-knowledge*

All Q&A pairs are automatically saved for future reference.

Storage Structure: >
    ~/.local/share/nvim/editutor/knowledge/
    ├── 2026-01-15.json
    ├── 2026-01-16.json
    ├── 2026-01-17.json
    └── ...
<
Each day gets its own file. Easy to manage, review, or delete.

Commands:
  :EduTutorHistory        Show recent Q&A (last 7 days)
  :EduTutorBrowse         List available dates
  :EduTutorBrowse [date]  Show entries for specific date
  :EduTutorExport [path]  Export to markdown

==============================================================================
12. COMMANDS                                                *editutor-commands*

Core Commands:
  :EduTutorAsk            Ask about current Q:/C: comment

Knowledge Commands:
  :EduTutorHistory        Show recent Q&A history
  :EduTutorBrowse [date]  Browse by date (tab-complete dates)
  :EduTutorExport [path]  Export to markdown

Language Commands:
  :EduTutorLang           Show/set language
  :EduTutorLang English   English responses
  :EduTutorLang Vietnamese Vietnamese responses

Other Commands:
  :EduTutorClearCache     Clear context cache
  :EduTutorLog            Open debug log
  :checkhealth editutor   Check plugin health

==============================================================================
13. KEYMAPS                                                  *editutor-keymaps*

Default keymaps (configurable):

  Normal mode:
    <leader>ma    Ask about Q:/C: at cursor

  Visual mode:
    <leader>ma    Ask about selected code (with Q:/C: in selection)

==============================================================================
14. API                                                          *editutor-api*

Main API: >lua
    local editutor = require("editutor")

    editutor.setup(opts)
    editutor.ask()              -- Normal mode ask
    editutor.ask_visual()       -- Visual mode ask
    editutor.version()          -- Returns version string
<

Parser API: >lua
    local parser = require("editutor.parser")

    -- Returns (question, mode) where mode is "question" or "code"
    parser.parse_line(line)
    parser.find_query(bufnr, line, include_answered)
    parser.get_visual_selection()
<

Prompts API: >lua
    local prompts = require("editutor.prompts")

    prompts.get_system_prompt(mode)  -- mode: "question" or "code"
    prompts.build_user_prompt(question, context, _, selected_code)
<

Provider API: >lua
    local provider = require("editutor.provider")

    provider.query_async(system, user, callback)
    provider.query_stream(system, user, on_chunk, on_done, opts)
    provider.list_providers()
<

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
